@startuml
title Multi-Zone Parking Detection - Data Flow

actor "User" as user

rectangle "Input Data" {
  folder "data/grid_photos/" as grid_folder
  folder "data/inputs/" as input_folder
}

rectangle "System Processing" {
  rectangle "Zone Editor" as editor
  rectangle "Main Pipeline" as main
  rectangle "Vehicle Detector" as detect
  rectangle "Utilities" as utils
}

rectangle "Configuration" {
  database "Zone Map JSON" as json
  database "Zone Visualization" as zone_vis
}

rectangle "Output Results" {
  database "Detection CSV" as csv
  database "Detection JSON" as json_summary
  database "Result Images" as result_images
}

' User workflow
user --> grid_folder : add reference images
user --> input_folder : add detection images  
user --> main : run system

' Zone creation flow
grid_folder --> editor : create zones
editor --> utils : zone operations
editor --> json : save zones
editor --> zone_vis : save visualization

' Detection flow
main --> detect : process images
input_folder --> detect : vehicle images
json --> detect : load zones
detect --> csv : save results
detect --> json_summary : save summary
detect --> result_images : save visualizations

' System integration
main --> editor : editor mode
utils --> editor : support functions
utils --> detect : support functions

@enduml